import{B as fe,C as ge,D as Q,E as ee,h as e,G as ve,p as H,H as X,I as J,J as G,u as Y,e as I,K as be,f as D,q as T,s as W,L as xe,x as re,r as f,o as n,l as C,j as r,b as s,z as M,t as y,a as t,c as d,n as F,i as E,w as te,M as K,N as ae,F as L,k as N,O as le,P as we,S as $e,m as ke,Q as ie,R,U as Ce,V as Z,W as Se,X as Be,d as Ie,Y as Ee,g as Ue}from"./main.58cdeacd.js";import{u as ce}from"./exchange-rate.5654bfba.js";import{u as Me}from"./users.78790fe3.js";import{N as Ve}from"./NotificationRoot.dc99bc56.js";import{V as Le}from"./index.55814269.js";function Ae(b){var i;const a=e(b);return(i=a==null?void 0:a.$el)!=null?i:a}const ue=fe?window:void 0;function Ne(...b){let i,a,l,m;if(ge(b[0])?([a,l,m]=b,i=ue):[i,a,l,m]=b,!i)return Q;let p=Q;const h=ee(()=>e(i),c=>{p(),c&&(c.addEventListener(a,l,m),p=()=>{c.removeEventListener(a,l,m),p=Q})},{immediate:!0,flush:"post"}),g=()=>{h(),p()};return ve(g),g}function de(b,i,a={}){const{window:l=ue,event:m="pointerdown"}=a;return l?Ne(l,m,h=>{const g=Ae(b);!g||g===h.target||h.composedPath().includes(g)||i(h)},{passive:!0}):void 0}var se;(function(b){b.UP="UP",b.RIGHT="RIGHT",b.DOWN="DOWN",b.LEFT="LEFT",b.NONE="NONE"})(se||(se={}));const Re={class:"flex justify-between w-full"},Fe=["onSubmit"],Te={class:"p-4 mb-16 sm:p-6 space-y-4"},Oe={key:1,class:"flex flex-col items-center"},je={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},De={setup(b){const i=H(),a=X(),l=J(),m=G(),{t:p}=Y();let h=I(!1),g=I(null),c=I(!1),u=I(null),v=I(null);const _=be({name:null,currency:"",address:{country_id:null}}),U=D(()=>l.active&&l.componentName==="CompanyModal"),S={newCompanyForm:{name:{required:T.withMessage(p("validation.required"),W),minLength:T.withMessage(p("validation.name_min_length",{count:3}),xe(3))},address:{country_id:{required:T.withMessage(p("validation.required"),W)}},currency:{required:T.withMessage(p("validation.required"),W)}}},o=re(S,{newCompanyForm:_});async function x(){var $,k,j,z;c.value=!0,await m.fetchCurrencies(),await m.fetchCountries(),_.currency=(($=a.selectedCompanyCurrency)==null?void 0:$.id)||(((k=m.currencies)==null?void 0:k.length)>0?m.currencies[0].id:null),_.address.country_id=((z=(j=a.selectedCompany)==null?void 0:j.address)==null?void 0:z.country_id)||null,c.value=!1}function w($,k){v.value=$,u.value=k}function B(){v.value=null,u.value=null}async function V(){if(o.value.newCompanyForm.$touch(),o.value.$invalid)return!0;h.value=!0;try{const $=await a.addNewCompany(_);if($.data.data){if(await a.setSelectedCompany($.data.data),u&&u.value){let k=new FormData;k.append("company_logo",JSON.stringify({name:v.value,data:u.value})),await a.updateCompanyLogo(k),i.push("/admin/dashboard")}await m.setIsAppLoaded(!1),await m.bootstrap(),q()}h.value=!1}catch{h.value=!1}}function O(){_.name="",_.currency="",_.address.country_id="",o.value.$reset()}function q(){l.closeModal(),setTimeout(()=>{O(),o.value.$reset()},300)}return($,k)=>{const j=f("BaseIcon"),z=f("BaseContentPlaceholdersBox"),me=f("BaseContentPlaceholders"),pe=f("BaseFileUploader"),P=f("BaseInputGroup"),_e=f("BaseInput"),ne=f("BaseMultiselect"),he=f("BaseInputGrid"),oe=f("BaseButton"),ye=f("BaseModal");return n(),C(ye,{show:e(U),onClose:q,onOpen:x},{header:r(()=>[s("div",Re,[M(y(e(l).title)+" ",1),t(j,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:q})])]),default:r(()=>[s("form",{action:"",onSubmit:te(V,["prevent"])},[s("div",Te,[t(he,{layout:"one-column"},{default:r(()=>[t(P,{"content-loading":e(c),label:$.$tc("settings.company_info.company_logo")},{default:r(()=>[e(c)?(n(),C(me,{key:0},{default:r(()=>[t(z,{rounded:!0,class:"w-full h-24"})]),_:1})):(n(),d("div",Oe,[t(pe,{"preview-image":e(g),base64:"",onRemove:B,onChange:w},null,8,["preview-image"])]))]),_:1},8,["content-loading","label"]),t(P,{label:$.$tc("settings.company_info.company_name"),error:e(o).newCompanyForm.name.$error&&e(o).newCompanyForm.name.$errors[0].$message,"content-loading":e(c),required:""},{default:r(()=>[t(_e,{modelValue:e(_).name,"onUpdate:modelValue":k[0]||(k[0]=A=>e(_).name=A),invalid:e(o).newCompanyForm.name.$error,"content-loading":e(c),onInput:k[1]||(k[1]=A=>e(o).newCompanyForm.name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(P,{"content-loading":e(c),label:$.$tc("settings.company_info.country"),error:e(o).newCompanyForm.address.country_id.$error&&e(o).newCompanyForm.address.country_id.$errors[0].$message,required:""},{default:r(()=>[t(ne,{modelValue:e(_).address.country_id,"onUpdate:modelValue":k[2]||(k[2]=A=>e(_).address.country_id=A),"content-loading":e(c),label:"name",invalid:e(o).newCompanyForm.address.country_id.$error,options:e(m).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["content-loading","label","error"]),t(P,{label:$.$t("wizard.currency"),error:e(o).newCompanyForm.currency.$error&&e(o).newCompanyForm.currency.$errors[0].$message,"content-loading":e(c),"help-text":$.$t("wizard.currency_set_alert"),required:""},{default:r(()=>[t(ne,{modelValue:e(_).currency,"onUpdate:modelValue":k[3]||(k[3]=A=>e(_).currency=A),"content-loading":e(c),options:e(m).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:$.$tc("settings.currencies.select_currency"),invalid:e(o).newCompanyForm.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading","help-text"])]),_:1})]),s("div",je,[t(oe,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:q},{default:r(()=>[M(y($.$t("general.cancel")),1)]),_:1}),t(oe,{loading:e(h),disabled:e(h),variant:"primary",type:"submit"},{left:r(A=>[e(h)?E("",!0):(n(),C(j,{key:0,name:"SaveIcon",class:F(A.class)},null,8,["class"]))]),default:r(()=>[M(" "+y($.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,Fe)]),_:1},8,["show"])}}},Ge={key:0,class:"w-16 text-sm font-medium truncate sm:w-auto"},qe={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg"},ze={class:"overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full w-[250px] max-h-[350px] scrollbar-thumb-gray-300 scrollbar-track-gray-10 pb-4"},Pe={class:"px-3 py-2 text-xs font-semibold text-gray-400 mb-0.5 block uppercase"},We={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},He={key:1},Xe={key:0},Je=["onClick"],Ye={class:"flex items-center"},Ke={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-gray-200 rounded-md w-9 h-9 text-primary-500"},Qe={key:0},Ze=["src"],et={class:"flex flex-col"},tt={class:"text-sm"},at={class:"font-medium"},nt={setup(b){const i=X(),a=J(),l=K(),m=H(),p=G(),{t:h}=Y(),g=ae(),c=I(!1),u=I(""),v=I(null);ee(l,()=>{c.value=!1,u.value=""}),de(v,()=>{c.value=!1});function _(o){if(o)return o.split(" ")[0].charAt(0).toUpperCase()}function U(){a.openModal({title:h("company_switcher.new_company"),componentName:"CompanyModal",size:"sm"})}async function S(o){await i.setSelectedCompany(o),m.push("/admin/dashboard"),await p.setIsAppLoaded(!1),await p.bootstrap()}return(o,x)=>{const w=f("BaseIcon");return n(),d("div",{ref:(B,V)=>{V.companySwitchBar=B,v.value=B},class:"relative rounded"},[t(De),s("div",{class:"flex items-center justify-center px-3 h-8 md:h-9 ml-2 text-sm text-white bg-white rounded cursor-pointer bg-opacity-20",onClick:x[0]||(x[0]=B=>c.value=!c.value)},[e(i).selectedCompany?(n(),d("span",Ge,y(e(i).selectedCompany.name),1)):E("",!0),t(w,{name:"ChevronDownIcon",class:"h-5 ml-1 text-white"})]),t(le,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:r(()=>[c.value?(n(),d("div",qe,[s("div",ze,[s("label",Pe,y(o.$t("company_switcher.label")),1),e(i).companies.length<1?(n(),d("div",We,[t(w,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),M(" "+y(o.$t("company_switcher.no_results_found")),1)])):(n(),d("div",He,[e(i).companies.length>0?(n(),d("div",Xe,[(n(!0),d(L,null,N(e(i).companies,(B,V)=>(n(),d("div",{key:V,class:F(["p-2 px-3 rounded-md cursor-pointer hover:bg-gray-100 hover:text-primary-500",{"bg-gray-100 text-primary-500":e(i).selectedCompany.id===B.id}]),onClick:O=>S(B)},[s("div",Ye,[s("span",Ke,[B.logo?(n(),d("img",{key:1,src:B.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,Ze)):(n(),d("span",Qe,y(_(B.name)),1))]),s("div",et,[s("span",tt,y(B.name),1)])])],10,Je))),128))])):E("",!0)]))]),e(g).currentUser.is_owner?(n(),d("div",{key:0,class:"flex items-center justify-center p-4 pl-3 border-t-2 border-gray-100 cursor-pointer text-primary-400 hover:text-primary-500",onClick:U},[t(w,{name:"PlusIcon",class:"h-5 mr-2"}),s("span",at,y(o.$t("company_switcher.add_new_company")),1)])):E("",!0)])):E("",!0)]),_:1})],512)}}},ot={key:0,class:"scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-gray-100 overflow-y-auto bg-white rounded-md mt-2 shadow-lg p-3 absolute w-[300px] h-[200px] right-0"},st={key:0,class:"flex items-center justify-center text-gray-400 text-base flex-col mt-4"},rt={key:1},lt={key:0},it={class:"text-sm text-gray-400 mb-0.5 block px-2 uppercase"},ct={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},ut={class:"flex flex-col"},dt={class:"text-sm"},mt={key:0,class:"text-xs text-gray-400"},pt={key:1,class:"text-xs text-gray-400"},_t={key:1,class:"mt-2"},ht={class:"text-sm text-gray-400 mb-2 block px-2 mb-0.5 uppercase"},yt={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},ft={class:"flex flex-col"},gt={class:"text-sm"},vt={class:"text-xs text-gray-400"},bt={setup(b){const i=Me(),a=I(!1),l=I(""),m=I(null),p=I(!1),h=K();ee(h,()=>{a.value=!1,l.value=""}),g=we.exports.debounce(g,500),de(m,()=>{a.value=!1,l.value=""});function g(){let u={search:l.value};l.value&&(p.value=!0,i.searchUsers(u).then(()=>{a.value=!0}),p.value=!1),l.value===""&&(a.value=!1)}function c(u){if(u)return u.split(" ")[0].charAt(0).toUpperCase()}return(u,v)=>{const _=f("BaseIcon"),U=f("BaseInput"),S=f("router-link");return n(),d("div",{ref:(o,x)=>{x.searchBar=o,m.value=o},class:"hidden rounded md:block relative"},[s("div",null,[t(U,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=o=>l.value=o),placeholder:"Search...","container-class":"!rounded",class:"h-8 md:h-9 !rounded",onInput:g},{left:r(()=>[t(_,{name:"SearchIcon",class:"text-gray-400"})]),right:r(()=>[p.value?(n(),C($e,{key:0,class:"h-5 text-primary-500"})):E("",!0)]),_:1},8,["modelValue"])]),t(le,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:r(()=>[a.value?(n(),d("div",ot,[e(i).userList.length<1&&e(i).customerList.length<1?(n(),d("div",st,[t(_,{name:"ExclamationCircleIcon",class:"text-gray-400"}),M(" "+y(u.$t("global_search.no_results_found")),1)])):(n(),d("div",rt,[e(i).customerList.length>0?(n(),d("div",lt,[s("label",it,y(u.$t("global_search.customers")),1),(n(!0),d(L,null,N(e(i).customerList,(o,x)=>(n(),d("div",{key:x,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(S,{to:{path:`/admin/customers/${o.id}/view`},class:"flex items-center"},{default:r(()=>[s("span",ct,y(c(o.name)),1),s("div",ut,[s("span",dt,y(o.name),1),o.contact_name?(n(),d("span",mt,y(o.contact_name),1)):(n(),d("span",pt,y(o.email),1))])]),_:2},1032,["to"])]))),128))])):E("",!0),e(i).userList.length>0?(n(),d("div",_t,[s("label",ht,y(u.$t("global_search.users")),1),(n(!0),d(L,null,N(e(i).userList,(o,x)=>(n(),d("div",{key:x,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(S,{to:{path:`/admin/users/${o.id}/edit`},class:"flex items-center"},{default:r(()=>[s("span",yt,y(c(o.name)),1),s("div",ft,[s("span",gt,y(o.name),1),s("span",vt,y(o.email),1)])]),_:2},1032,["to"])]))),128))])):E("",!0)]))])):E("",!0)]),_:1})],512)}}},xt={class:"fixed top-0 left-0 z-20 flex items-center justify-between w-full px-4 py-3 md:h-16 md:px-8 bg-gradient-to-r from-primary-500 to-primary-400"},wt=["src"],$t=["onClick"],kt={class:"flex float-right h-8 m-0 list-none md:h-9"},Ct={key:0,class:"relative hidden float-left m-0 md:block"},St={class:"flex items-center justify-center w-8 h-8 ml-2 text-sm text-black bg-white rounded md:h-9 md:w-9"},Bt={class:"ml-2"},It={class:"relative block float-left ml-2"},Et=["src"],Ut={setup(b){const i=ke(),a=ae(),l=G(),m=H(),p=D(()=>a.currentUser&&a.currentUser.avatar!==0?a.currentUser.avatar:g()),h=D(()=>l.globalSettings.admin_portal_logo?"/storage/"+l.globalSettings.admin_portal_logo:!1);function g(){return new URL("/build/img/default-avatar.jpg",self.location)}function c(){return a.hasAbilities([R.CREATE_INVOICE,R.CREATE_ESTIMATE,R.CREATE_CUSTOMER])}async function u(){await i.logout(),m.push("/login")}function v(){l.setSidebarVisibility(!0)}return(_,U)=>{const S=f("router-link"),o=f("BaseIcon"),x=f("BaseDropdownItem"),w=f("BaseDropdown");return n(),d("header",xt,[t(S,{to:"/admin/dashboard",class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base hidden md:block"},{default:r(()=>[e(h)?(n(),d("img",{key:0,src:e(h),class:"h-6"},null,8,wt)):(n(),C(ie,{key:1,class:"h-6","light-color":"white","dark-color":"white"}))]),_:1}),s("div",{class:F([{"is-active":e(l).isSidebarOpen},"flex float-left p-1 overflow-visible text-sm ease-linear bg-white border-0 rounded cursor-pointer md:hidden md:ml-0 hover:bg-gray-100"]),onClick:te(v,["prevent"])},[t(o,{name:"MenuIcon",class:"!w-6 !h-6 text-gray-500"})],10,$t),s("ul",kt,[c?(n(),d("li",Ct,[t(w,{"width-class":"w-48"},{activator:r(()=>[s("div",St,[t(o,{name:"PlusIcon",class:"w-5 h-5 text-gray-600"})])]),default:r(()=>[t(S,{to:"/admin/invoices/create"},{default:r(()=>[e(a).hasAbilities(e(R).CREATE_INVOICE)?(n(),C(x,{key:0},{default:r(()=>[t(o,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+y(_.$t("invoices.new_invoice")),1)]),_:1})):E("",!0)]),_:1}),t(S,{to:"/admin/estimates/create"},{default:r(()=>[e(a).hasAbilities(e(R).CREATE_ESTIMATE)?(n(),C(x,{key:0},{default:r(()=>[t(o,{name:"DocumentIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+y(_.$t("estimates.new_estimate")),1)]),_:1})):E("",!0)]),_:1}),t(S,{to:"/admin/customers/create"},{default:r(()=>[e(a).hasAbilities(e(R).CREATE_CUSTOMER)?(n(),C(x,{key:0},{default:r(()=>[t(o,{name:"UserIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+y(_.$t("customers.new_customer")),1)]),_:1})):E("",!0)]),_:1})]),_:1})])):E("",!0),s("li",Bt,[e(a).currentUser.is_owner||e(a).hasAbilities(e(R).VIEW_CUSTOMER)?(n(),C(bt,{key:0})):E("",!0)]),s("li",null,[t(nt)]),s("li",It,[t(w,{"width-class":"w-48"},{activator:r(()=>[s("img",{src:e(p),class:"block w-8 h-8 rounded md:h-9 md:w-9 object-cover"},null,8,Et)]),default:r(()=>[t(S,{to:"/admin/settings/account-settings"},{default:r(()=>[t(x,null,{default:r(()=>[t(o,{name:"CogIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+y(_.$t("navigation.settings")),1)]),_:1})]),_:1}),t(x,{onClick:u},{default:r(()=>[t(o,{name:"LogoutIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),M(" "+y(_.$t("navigation.logout")),1)]),_:1})]),_:1})])])])}}},Mt={class:"relative flex flex-col flex-1 w-full max-w-xs bg-white"},Vt={class:"absolute top-0 right-0 pt-2 -mr-12"},Lt=s("span",{class:"sr-only"},"Close sidebar",-1),At={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},Nt={class:"flex items-center shrink-0 px-4 mb-10"},Rt=s("div",{class:"shrink-0 w-14"},null,-1),Ft={class:"hidden w-56 h-screen pb-32 overflow-y-auto bg-white border-r border-gray-200 border-solid xl:w-64 md:fixed md:flex md:flex-col md:inset-y-0 pt-16"},Tt={setup(b){const i=K(),a=G();function l(m){return i.path.indexOf(m)>-1}return(m,p)=>{const h=f("BaseIcon"),g=f("router-link");return n(),d(L,null,[t(e(Be),{as:"template",show:e(a).isSidebarOpen},{default:r(()=>[t(e(Ce),{as:"div",class:"fixed inset-0 z-40 flex md:hidden",onClose:p[3]||(p[3]=c=>e(a).setSidebarVisibility(!1))},{default:r(()=>[t(e(Z),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[t(e(Se),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})]),_:1}),t(e(Z),{as:"template",enter:"transition ease-in-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:r(()=>[s("div",Mt,[t(e(Z),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[s("div",Vt,[s("button",{class:"flex items-center justify-center w-10 h-10 ml-1 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:p[0]||(p[0]=c=>e(a).setSidebarVisibility(!1))},[Lt,t(h,{name:"XIcon",class:"w-6 h-6 text-white","aria-hidden":"true"})])])]),_:1}),s("div",At,[s("div",Nt,[t(ie,{class:"block h-auto max-w-full w-36 text-primary-400",alt:"Crater Logo"})]),(n(!0),d(L,null,N(e(a).menuGroups,c=>(n(),d("nav",{key:c,class:"mt-5 space-y-1"},[(n(!0),d(L,null,N(c,u=>(n(),C(g,{key:u.name,to:u.link,class:F([l(u.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-4 py-3 border-transparent flex items-center border-l-4 border-solid text-sm not-italic font-medium"]),onClick:p[2]||(p[2]=v=>e(a).setSidebarVisibility(!1))},{default:r(()=>[t(h,{name:u.icon,class:F([l(u.link)?"text-primary-500 ":"text-gray-400","mr-4 shrink-0 h-5 w-5"]),onClick:p[1]||(p[1]=v=>e(a).setSidebarVisibility(!1))},null,8,["name","class"]),M(" "+y(m.$t(u.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])])]),_:1}),Rt]),_:1})]),_:1},8,["show"]),s("div",Ft,[(n(!0),d(L,null,N(e(a).menuGroups,c=>(n(),d("div",{key:c,class:"p-0 m-0 mt-6 list-none"},[(n(!0),d(L,null,N(c,u=>(n(),C(g,{key:u,to:u.link,class:F([l(u.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-6 hover:bg-gray-50 py-3 group flex items-center border-l-4 border-solid border-transparent text-sm not-italic font-medium"])},{default:r(()=>[t(h,{name:u.icon,class:F([l(u.link)?"text-primary-500 group-hover:text-primary-500 ":"text-gray-400 group-hover:text-black","mr-4 shrink-0 h-5 w-5 "])},null,8,["name","class"]),M(" "+y(m.$t(u.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])],64)}}},Ot={class:"font-medium text-lg text-left"},jt={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},Dt=["onSubmit"],Gt={class:"text-gray-500 sm:text-sm"},qt={class:"text-gray-400 text-xs mt-2 font-light"},zt={slot:"footer",class:"z-0 flex justify-end mt-4 pt-4 border-t border-gray-200 border-solid border-modal-bg"},Pt={emits:["update"],setup(b,{emit:i}){const a=ce();Ie();const l=X(),{t:m,tm:p}=Y();let h=I(!1);I(!1);const g={exchange_rate:{required:T.withMessage(m("validation.required"),W),decimal:T.withMessage(m("validation.valid_exchange_rate"),Ee)}},c=re();async function u(){if(c.value.$touch(),c.value.$invalid)return!0;h.value=!0;let v=a.bulkCurrencies.map(U=>({id:U.id,exchange_rate:U.exchange_rate})),_=await a.updateBulkExchangeRate({currencies:v});_.data.success&&i("update",_.data.success),h.value=!1}return(v,_)=>{const U=f("BaseInput"),S=f("BaseInputGroup"),o=f("BaseButton"),x=f("BaseCard");return n(),C(x,null,{default:r(()=>[s("h6",Ot,y(v.$t("settings.exchange_rate.title")),1),s("p",jt,y(v.$t("settings.exchange_rate.description",{currency:e(l).selectedCompanyCurrency.name})),1),s("form",{action:"",onSubmit:te(u,["prevent"])},[(n(!0),d(L,null,N(e(a).bulkCurrencies,(w,B)=>(n(),C(e(Le),{key:B,state:w,rules:g},{default:r(({v:V})=>[t(S,{class:"my-5",label:`${w.code} to ${e(l).selectedCompanyCurrency.code}`,error:V.exchange_rate.$error&&V.exchange_rate.$errors[0].$message,required:""},{default:r(()=>[t(U,{modelValue:w.exchange_rate,"onUpdate:modelValue":O=>w.exchange_rate=O,addon:`1 ${w.code} =`,invalid:V.exchange_rate.$error,onInput:O=>V.exchange_rate.$touch()},{right:r(()=>[s("span",Gt,y(e(l).selectedCompanyCurrency.code),1)]),_:2},1032,["modelValue","onUpdate:modelValue","addon","invalid","onInput"]),s("span",qt,y(v.$t("settings.exchange_rate.exchange_help_text",{currency:w.code,baseCurrency:e(l).selectedCompanyCurrency.code})),1)]),_:2},1032,["label","error"])]),_:2},1032,["state"]))),128)),s("div",zt,[t(o,{loading:e(h),variant:"primary",type:"submit"},{default:r(()=>[M(y(v.$t("general.save")),1)]),_:1},8,["loading"])])],40,Dt)]),_:1})}}},Wt={setup(b){const i=J(),a=D(()=>i.active&&i.componentName==="ExchangeRateBulkUpdateModal");function l(){i.closeModal()}return(m,p)=>{const h=f("BaseModal");return n(),C(h,{show:e(a)},{default:r(()=>[t(Pt,{onUpdate:p[0]||(p[0]=g=>l())})]),_:1},8,["show"])}}},Ht={key:0,class:"h-full"},Xt={class:"h-screen h-screen-ios overflow-y-auto md:pl-56 xl:pl-64 min-h-0"},Jt={class:"pt-16 pb-16"},ta={setup(b){const i=G(),a=K(),l=ae(),m=H(),p=J();Y();const h=ce(),g=X(),c=D(()=>i.isAppLoaded);return Ue(()=>{i.bootstrap().then(u=>{a.meta.ability&&!l.hasAbilities(a.meta.ability)?m.push({name:"account.settings"}):a.meta.isOwner&&!l.currentUser.is_owner&&m.push({name:"account.settings"}),u.data.current_company_settings.bulk_exchange_rate_configured==="NO"&&h.fetchBulkCurrencies().then(v=>{if(v.data.currencies.length)p.openModal({componentName:"ExchangeRateBulkUpdateModal",size:"sm"});else{let _={settings:{bulk_exchange_rate_configured:"YES"}};g.updateCompanySettings({data:_})}})})}),(u,v)=>{const _=f("router-view"),U=f("BaseGlobalLoader");return e(c)?(n(),d("div",Ht,[t(Ve),t(Ut),t(Tt),t(Wt),s("main",Xt,[s("div",Jt,[t(_)])])])):(n(),C(U,{key:1}))}}};export{ta as default};
